<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="setting-info.html">
<link rel="import" href="preview-capture.html">
<link rel="import" href="bower_components/paper-toast/paper-toast.html">

<polymer-element name="record-page">
  <template>
    <style>
    :host {
      display: block;
      width: 100%;
    }
    :host #setting {
      margin: 25px;
    }
    :host #preview {
      margin: 25px;
    }
    </style>
    <core-media-query query="max-width: 920px" queryMatches="{{phoneScreen}}"></core-media-query>
    <div id="layout" layout vertical?={{phoneScreen}} horizontal?={{!phoneScreen}} center?={{phoneScreen}}>
      <setting-info id="setting" phoneScreen?={{phoneScreen}}></setting-info>
      <preview-capture id="preview" flex collapse?={{phoneScreen}}></preview-capture>
    </div>
    <paper-toast id="toast" text=""></paper-toast>
  </template>
  <script>
  Polymer({
    ready: function() {
      var self = this;
      chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {
        if (request.alert) {
          var message = request.alert.message;
          self.$.toast.text= message;
          self.$.toast.show();
        }
      });
    }
  });
  </script>
</polymer-element>
