<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/core-ajax/core-ajax.html">
<link rel="import" href="bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="record-item.html">

<polymer-element name="record-list">
  <template>
    <style>
    :host {
      display: block;
      padding: 25px;
      box-sizing: border-box;
    }
    </style>
    <core-ajax url="http://localhost:11080/api/record/list" handleAs="json" auto on-core-response="{{handleResponse}}"></core-ajax>
    <div horizontal layout wrap>
    <template repeat='{{records}}'>
      <record-item name="{{name}}" url="{{url}}" throttle="{{throttle}}" timing="{{timing}}" date="{{date}}"></record-item>
    </template>
    </div>
  </template>
  <script>
  Polymer({
    created: function() {
      this.records = [];
    },
    ready: function() {
      this.records = [
        {
          name: 'Sample',
          url: 'http://www.example.com/pattern1',
          throttle: {
            rate: '2mbit',
            delay: '20ms'
          },
          timing: {
            domContentLoad: '3000ms',
            load: '5000ms',
          },
          date: '2015-3-15',
          fullName: 'Sample-xxx'
        },
        {
          name: 'Test',
          url: 'http://www.example.com/pattern2',
          throttle: {
            rate: '2mbit',
            delay: '50ms'
          },
          timing: {
            domContentLoad: '5000ms',
            load: '8000ms',
          },
          date: '2015-3-15',
          fullName: 'Test-xxx'
        }
      ];
    },
    handleResponse: function(e, res) {
      /*
      this.records = res.response.items.map(function(name) {
        return {
          name: name
        };
      });
      */
    }
  });
  </script>
</polymer-element>
